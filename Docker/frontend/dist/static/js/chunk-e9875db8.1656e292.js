(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e9875db8"],{"3e96":function(e,t,i){},44537:function(e,t,i){"use strict";i("6735")},6735:function(e,t,i){},"81d5":function(e,t,i){"use strict";var o=i("7b0b"),r=i("23cb"),s=i("50c4");e.exports=function(e){var t=o(this),i=s(t.length),n=arguments.length,a=r(n>1?arguments[1]:void 0,i),l=n>2?arguments[2]:void 0,c=void 0===l?i:r(l,i);while(c>a)t[a++]=e;return t}},"9ed6":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login-container",staticStyle:{position:"relative"}},[i("div",{staticClass:"form-box"},[i("div",{staticClass:"login-box",class:{hidden:!e.islogin}},[i("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[i("div",{staticClass:"title-container"},[i("h3",{staticClass:"title"},[e._v("莞工计协报修系统")])]),i("el-form-item",{staticClass:"login-container",attrs:{prop:"phone"}},[i("span",{staticStyle:{color:"white","font-weight":"bold",margin:"0 10px"}},[e._v("账号")]),i("el-input",{ref:"phone",staticClass:"login-input",attrs:{placeholder:"请输入手机号码",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.phone,callback:function(t){e.$set(e.loginForm,"phone",t)},expression:"loginForm.phone"}})],1),i("el-form-item",{staticClass:"login-container",attrs:{prop:"password"}},[i("span",{staticStyle:{color:"white","font-weight":"bold",margin:"0 10px"}},[e._v("密码")]),i("el-input",{key:e.passwordType,ref:"password",staticClass:"login-input",attrs:{type:e.passwordType,placeholder:"请输入密码",tabindex:"2","auto-complete":"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),i("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[i("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),i("div",{staticStyle:{display:"flex"}},[i("el-form-item",{staticClass:"login-container",staticStyle:{width:"80%"}},[i("span",{staticStyle:{color:"white","font-weight":"bold",margin:"0 10px"}},[e._v("验证码")]),i("el-input",{staticClass:"login-input",staticStyle:{width:"60%"},attrs:{placeholder:"请输入验证码"},model:{value:e.loginForm.verificationCode,callback:function(t){e.$set(e.loginForm,"verificationCode",t)},expression:"loginForm.verificationCode"}})],1),i("div",{staticStyle:{"margin-left":"10px"},on:{click:e.verificationCodeGeneration}},[i("canvas",{attrs:{id:"canvas",width:"120",height:"47"}})])],1),i("span",{staticStyle:{display:"flex"}},[i("el-button",{staticStyle:{width:"80%",margin:"0 auto 10px auto"},attrs:{loading:e.loading,type:"primary"},on:{click:e.login}},[e._v("登录")])],1),i("div",{staticStyle:{color:"#20a0ff",cursor:"pointer"},on:{click:e.goTorRgister}},[e._v(" 去注册 ")])],1)],1),i("div",{staticClass:"login-box",class:{hidden:e.islogin}},[e._m(0),i("el-form",{ref:"registerForm",staticClass:"register-form",attrs:{id:"register",model:e.registerForm,rules:e.registerRules,"auto-complete":"on","label-position":"left"}},[i("el-form-item",{staticClass:"login-container",attrs:{prop:"phone"}},[i("span",{staticStyle:{color:"white","font-weight":"bold",margin:"0 10px"}},[e._v("账号")]),i("el-input",{ref:"phone",staticClass:"login-input",attrs:{placeholder:"请输入手机号码",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.registerForm.phone,callback:function(t){e.$set(e.registerForm,"phone",t)},expression:"registerForm.phone"}})],1),i("el-form-item",{staticClass:"login-container",attrs:{prop:"password"}},[i("span",{staticStyle:{color:"white","font-weight":"bold",margin:"0 10px"}},[e._v("密码")]),i("el-input",{key:e.passwordType,ref:"password",staticClass:"login-input",attrs:{type:e.passwordType,placeholder:"请输入密码",tabindex:"2","auto-complete":"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}}),i("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[i("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),i("el-form-item",{staticClass:"login-container",staticStyle:{transition:"all 0.2s ease-in-out"},attrs:{prop:"name"}},[i("span",{staticStyle:{color:"white","font-weight":"bold",margin:"0 10px"}},[e._v("用户名")]),i("el-input",{ref:"name",staticClass:"login-input",staticStyle:{width:"80%"},attrs:{placeholder:"请输入用户名",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.registerForm.name,callback:function(t){e.$set(e.registerForm,"name",t)},expression:"registerForm.name"}})],1),i("span",{staticStyle:{display:"flex"}},[i("el-button",{staticStyle:{width:"80%","margin-bottom":"30px","--animate-duration":"2s",margin:"0 auto 10px auto"},attrs:{loading:e.loading,type:"primary"},on:{click:e.register}},[e._v("注册")])],1),i("div",{staticStyle:{color:"#20a0ff",cursor:"pointer"},on:{click:e.goToLogin}},[e._v(" 已有账号去登录 ")])],1)],1)]),i("vue-particles",{attrs:{color:"#39AFFD","particle-opacity":.7,"particles-number":80,"shape-type":"circle","particle-size":4,"lines-color":"#409EFF","lines-width":1,"line-linked":!0,"line-opacity":.4,"lines-distance":150,"move-speed":3,"hover-effect":!0,"hover-mode":"grab","click-effect":!0,"click-mode":"push"}})],1)},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"title-container"},[i("h3",{staticClass:"title"},[e._v("莞工计协报修系统")])])}],s=(i("ac1f"),i("00b4"),i("b64b"),i("e9c4"),i("99af"),i("cb29"),i("c24f")),n=function(e,t,i){var o=/^1[3456789]\d{9}$/;o.test(t)?i():i(new Error("请输入正确手机格式"))},a={phone:void 0,password:void 0,verificationCode:void 0},l={phone:[{required:!0,trigger:"change",validator:n}],password:[{required:!0,message:"请输入密码",trigger:"change"}],verificationCode:[{required:!0,message:"请输入验证码",trigger:"change"}]},c={name:void 0,phone:void 0,password:void 0},d={name:[{required:!0,message:"请输入姓名",trigger:"change"}],phone:[{required:!0,trigger:"change",validator:n}],password:[{required:!0,message:"请输入密码",trigger:"change"}]},p={name:"Login",data:function(){return{loginForm:{},loginRules:{},registerForm:{},registerRules:{},loading:!1,passwordType:"password",redirect:void 0,islogin:!0,verificationCode:""}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},created:function(){this.loginForm=JSON.parse(JSON.stringify(a)),this.loginRules=JSON.parse(JSON.stringify(l))},mounted:function(){this.verificationCodeGeneration()},methods:{showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},rn:function(e,t){return parseInt(Math.random()*(t-e)+e)},rc:function(e,t){var i=this.rn(e,t),o=this.rn(e,t),r=this.rn(e,t);return"rgb(".concat(i,",").concat(o,",").concat(r,")")},verificationCodeGeneration:function(){this.verificationCode="";var e=120,t=47,i=document.getElementById("canvas"),o=i.getContext("2d");o.fillStyle=this.rc(180,230),o.fillRect(0,0,e,t);for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",s=0;s<4;s++){var n=r[this.rn(0,r.length)],a=this.rn(20,50),l=this.rn(-30,30);o.font=a+"px  Arial",o.textBaseline="top",o.fillStyle=this.rc(80,150),o.save(),o.translate(30*s+15,15),o.rotate(l*Math.PI/180),o.fillText(n,-10,-10),o.restore(),this.verificationCode+=n}for(var c=0;c<5;c++)o.beginPath(),o.moveTo(this.rn(0,e),this.rn(0,t)),o.lineTo(this.rn(0,e),this.rn(0,t)),o.strokeStyle=this.rc(180,230),o.closePath(),o.stroke();for(var d=0;d<40;d++)o.beginPath(),o.arc(this.rn(0,e),this.rn(0,t),1,0,2*Math.PI),o.closePath(),o.fillStyle=this.rc(150,200),o.fill()},login:function(){var e=this;this.$refs["loginForm"].validate((function(t){e.verificationCode===e.loginForm.verificationCode?t?(e.loading=!0,e.$store.dispatch("user/login",e.loginForm).then((function(){e.$router.push({path:e.redirect||"/"}),e.$message({message:"登录成功",type:"success"}),e.loading=!1})).catch((function(t){e.loading=!1,"Error: GraphQL error: bad passwd"===t?e.$message.error("密码输入错误"):t&&(console.log("Error: GraphQL error: bad request"===t),e.$message.error("账号输入错误"))}))):e.loading=!1:(e.$message.error("验证码错误,请重新输入"),e.verificationCodeGeneration())}))},goToLogin:function(){this.loginForm=JSON.parse(JSON.stringify(a)),this.loginRules=JSON.parse(JSON.stringify(l)),this.islogin=!this.islogin},goTorRgister:function(){this.registerForm=JSON.parse(JSON.stringify(c)),this.registerRules=JSON.parse(JSON.stringify(d)),this.islogin=!this.islogin},register:function(){var e=this;this.$refs["registerForm"].validate((function(t){t&&(e.loading=!0,Object(s["c"])(e.registerForm).then((function(t){e.$message({message:"注册成功",type:"success"}),e.loginForm.phone=e.registerForm.phone,e.loginForm.password=e.registerForm.password,e.loginForm.verificationCode=e.verificationCode,e.login(),e.loading=!1})).catch((function(t){e.$message.error("当前手机号码已注册"),e.loading=!1})))}))}}},g=p,u=(i("f9aa"),i("44537"),i("2877")),f=Object(u["a"])(g,o,r,!1,null,"c9b165ae",null);t["default"]=f.exports},cb29:function(e,t,i){var o=i("23e7"),r=i("81d5"),s=i("44d2");o({target:"Array",proto:!0},{fill:r}),s("fill")},e9c4:function(e,t,i){var o=i("23e7"),r=i("d066"),s=i("d039"),n=r("JSON","stringify"),a=/[\uD800-\uDFFF]/g,l=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,d=function(e,t,i){var o=i.charAt(t-1),r=i.charAt(t+1);return l.test(e)&&!c.test(r)||c.test(e)&&!l.test(o)?"\\u"+e.charCodeAt(0).toString(16):e},p=s((function(){return'"\\udf06\\ud834"'!==n("\udf06\ud834")||'"\\udead"'!==n("\udead")}));n&&o({target:"JSON",stat:!0,forced:p},{stringify:function(e,t,i){var o=n.apply(null,arguments);return"string"==typeof o?o.replace(a,d):o}})},f9aa:function(e,t,i){"use strict";i("3e96")}}]);