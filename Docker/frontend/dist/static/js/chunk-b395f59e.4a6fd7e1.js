(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b395f59e"],{"333d":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"block",staticStyle:{"margin-top":"10px",position:"absolute",bottom:"0",right:"0"}},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.SizeChange,"current-change":e.CurrentChange}})],1)},a=[],r=(n("a9e3"),{props:{page:{type:Number,default:1},size:{type:Number,default:10},total:{type:Number,default:10}},data:function(){return{currentPage:1,pageSize:10}},watch:{Page:function(){this.currentPage=this.page},Size:function(){this.pageSize=this.size}},mounted:function(){this.currentPage=this.page,this.pageSize=this.size},methods:{SizeChange:function(e){this.pageSize=e,this.currentPage=1,this.$emit("handlePageSizeChange",this.currentPage,this.pageSize)},CurrentChange:function(e){this.currentPage=e,this.$emit("handlePageCurrentChange",this.currentPage,this.pageSize)}}}),o=r,s=n("2877"),l=Object(s["a"])(o,i,a,!1,null,"582eac06",null);t["a"]=l.exports},3900:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("选择时间范围：")]),n("el-date-picker",{staticStyle:{"margin-right":"20px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp",size:"small"},model:{value:e.query.timeRange,callback:function(t){e.$set(e.query,"timeRange",t)},expression:"query.timeRange"}}),n("span",[e._v("工单标题：")]),n("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"请输入工单标题",size:"small"},model:{value:e.query.selectInput,callback:function(t){e.$set(e.query,"selectInput",t)},expression:"query.selectInput"}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.search}},[e._v("查询")]),n("el-button",{attrs:{icon:"el-icon-refresh-right",size:"small"},on:{click:e.reset}},[e._v("重置")]),n("el-button",{attrs:{type:"success",icon:"el-icon-refresh",size:"small"},on:{click:e.refresh}},[e._v("刷新")])],1),n("div",{staticStyle:{height:"550px",position:"relative"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{loading:e.tableLoading,data:e.formList,border:"","header-cell-style":{background:"#f3f6fd"},"max-height":"500","element-loading-background":"rgba(255, 255, 255, 0.5)","element-loading-text":"数据正在加载中","element-loading-spinner":"el-icon-loading"}},[n("el-table-column",{attrs:{align:"center",prop:"createdAt",label:"提交时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(new Date(1e3*t.row.createdAt).toLocaleString())+" ")]}}])}),n("el-table-column",{attrs:{align:"center",prop:"title",label:"标题"}}),n("el-table-column",{attrs:{align:"center",prop:"type",label:"故障类型"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.type?n("span",[e._v("启动故障")]):e._e(),"1"===t.row.type?n("span",[e._v("系统故障")]):e._e(),"2"===t.row.type?n("span",[e._v("蓝屏故障")]):e._e(),"3"===t.row.type?n("span",[e._v("黑屏故障")]):e._e(),"4"===t.row.type?n("span",[e._v("死机故障")]):e._e(),"5"===t.row.type?n("span",[e._v("重启故障")]):e._e(),"6"===t.row.type?n("span",[e._v("电脑服务")]):e._e()]}}])}),n("el-table-column",{attrs:{align:"center",prop:"hopeAt",label:"预约时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(new Date(1e3*t.row.hopeAt).toLocaleString())+" ")]}}])}),n("el-table-column",{attrs:{align:"center",prop:"contact",label:"联系电话"}}),n("el-table-column",{attrs:{align:"center",prop:"evaluation",label:"用户评价"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-rate",{directives:[{name:"show",rawName:"v-show",value:null!=t.row.evaluation,expression:"slot.row.evaluation != null"}],attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},model:{value:t.row.evaluation,callback:function(n){e.$set(t.row,"evaluation",n)},expression:"slot.row.evaluation"}}),n("span",{directives:[{name:"show",rawName:"v-show",value:null===t.row.evaluation,expression:"slot.row.evaluation === null"}]},[e._v("用户未评价")])]}}])})],1),n("Pagination",{attrs:{total:Number(e.total),page:e.query.page,size:e.query.limit},on:{handlePageSizeChange:e.getCursor,handlePageCurrentChange:e.getCursor}})],1)])],1)},a=[],r=(n("d81d"),n("333d")),o=n("c7ea"),s={components:{Pagination:r["a"]},data:function(){return{query:{page:1,limit:10,after:null,timeRange:"",selectInput:"",isFinished:!0,isClosed:!0},tableLoading:!0,formList:[],total:""}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.tableLoading=!0,Object(o["a"])(this.query).then((function(t){e.formList=t.data.orders.edges.map((function(e){return{id:e.node.id,createdAt:e.node.createdAt,hopeAt:e.node.hopeAt,title:e.node.title,type:e.node.type,contact:e.node.contact,evaluation:e.node.evaluation}})),e.total=t.data.orders.totalCount,e.tableLoading=!1})),this.tableLoading=!1},getCursor:function(e,t){var n=this;this.query.page=e,this.query.limit=t,1!==this.query.page?(this.query.after=null,Object(o["b"])(this.query).then((function(e){console.log(111,e.data),n.query.after=e.data.orders.pageInfo.endCursor,n.getList()}))):(this.query.after=null,this.getList())},search:function(){this.getList()},reset:function(){this.query.timeRange="",this.query.selectInput="",this.getList()},refresh:function(){this.getList()}}},l=s,u=n("2877"),c=Object(u["a"])(l,i,a,!1,null,"02f0e9d5",null);t["default"]=c.exports},c7ea:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"g",(function(){return y})),n.d(t,"f",(function(){return m})),n.d(t,"c",(function(){return C})),n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return $})),n.d(t,"e",(function(){return v})),n.d(t,"i",(function(){return q})),n.d(t,"h",(function(){return A}));var i,a,r,o,s,l,u,c,d,p=n("8785"),h=n("5184"),f=n("2866");function g(e){return f["a"].query({url:"query",method:"post",headers:{"Content-Type":"application/json"},fetchPolicy:"no-cache",query:Object(h["a"])(i||(i=Object(p["a"])(["\n      query (\n        $first: Int\n        $after: Cursor\n        $isFinished: Boolean\n        $isClosed: Boolean\n        $hopeAtGTE: Int64\n        $hopeAtLTE: Int64\n        $titleContains: String\n      ) {\n        orders(\n          first: $first\n          after: $after\n          where: {\n            or: [{ isFinished: $isFinished }, { isClosed: $isClosed }]\n            hopeAtGTE: $hopeAtGTE\n            hopeAtLTE: $hopeAtLTE\n            titleContains: $titleContains\n          }\n        ) {\n          edges {\n            cursor\n          }\n          pageInfo {\n            startCursor\n            endCursor\n          }\n        }\n      }\n    "]))),variables:{first:e.limit*(e.page-1),after:e.after,hopeAtGTE:parseInt(e.timeRange[0]/1e3),hopeAtLTE:parseInt(e.timeRange[1]/1e3),titleContains:e.selectInput,isFinished:e.isFinished,isClosed:e.isClosed}})}function y(e){return f["a"].query({url:"query",method:"post",headers:{"Content-Type":"application/json"},fetchPolicy:"no-cache",query:Object(h["a"])(a||(a=Object(p["a"])(["\n      query (\n        $first: Int\n        $after: Cursor\n        $isFinished: Boolean\n        $isClosed: Boolean\n        $hopeAtGTE: Int64\n        $hopeAtLTE: Int64\n        $titleContains: String\n      ) {\n        orders(\n          first: $first\n          after: $after\n          where: {\n            isClosed: $isClosed\n            isFinished: $isFinished\n            hopeAtGTE: $hopeAtGTE\n            hopeAtLTE: $hopeAtLTE\n            titleContains: $titleContains\n          }\n        ) {\n          edges {\n            cursor\n          }\n          pageInfo {\n            startCursor\n            endCursor\n          }\n        }\n      }\n    "]))),variables:{first:e.limit*(e.page-1),after:e.after,hopeAtGTE:parseInt(e.timeRange[0]/1e3),hopeAtLTE:parseInt(e.timeRange[1]/1e3),titleContains:e.selectInput,isFinished:e.isFinished,isClosed:e.isClosed}})}function m(e){return f["a"].query({url:"query",method:"post",headers:{"Content-Type":"application/json"},fetchPolicy:"no-cache",query:Object(h["a"])(r||(r=Object(p["a"])(["\n      query (\n        $first: Int\n        $after: Cursor\n        $isFinished: Boolean\n        $isClosed: Boolean\n        $hopeAtGTE: Int64\n        $hopeAtLTE: Int64\n        $titleContains: String\n      ) {\n        orders(\n          first: $first\n          after: $after\n          where: {\n            isClosed: $isClosed\n            isFinished: $isFinished\n            hopeAtGTE: $hopeAtGTE\n            hopeAtLTE: $hopeAtLTE\n            titleContains: $titleContains\n          }\n        ) {\n          edges {\n            node {\n              id\n              title\n              contact\n              type\n              hopeAt\n              createdAt\n            }\n          }\n          totalCount\n        }\n      }\n    "]))),variables:{first:e.limit,after:e.after,hopeAtGTE:parseInt(e.timeRange[0]/1e3),hopeAtLTE:parseInt(e.timeRange[1]/1e3),titleContains:e.selectInput,isFinished:e.isFinished,isClosed:e.isClosed}})}function C(e){return f["a"].query({url:"query",method:"post",headers:{"Content-Type":"application/json"},query:Object(h["a"])(o||(o=Object(p["a"])(["\n      query ($id: ID) {\n        orders(where: { id: $id }) {\n          edges {\n            node {\n              id\n              title\n              content\n              contact\n              type\n              hopeAt\n              createdAt\n            }\n          }\n          totalCount\n        }\n      }\n    "]))),variables:{id:e}})}function b(e){return f["a"].query({url:"query",method:"post",headers:{"Content-Type":"application/json"},fetchPolicy:"no-cache",query:Object(h["a"])(s||(s=Object(p["a"])(["\n      query (\n        $first: Int\n        $after: Cursor\n        $isFinished: Boolean\n        $isClosed: Boolean\n        $hopeAtGTE: Int64\n        $hopeAtLTE: Int64\n        $titleContains: String\n      ) {\n        orders(\n          first: $first\n          after: $after\n          where: {\n            or: [{ isFinished: $isFinished }, { isClosed: $isClosed }]\n            hopeAtGTE: $hopeAtGTE\n            hopeAtLTE: $hopeAtLTE\n            titleContains: $titleContains\n          }\n        ) {\n          edges {\n            node {\n              id\n              title\n              contact\n              type\n              hopeAt\n              createdAt\n              evaluation\n            }\n          }\n          totalCount\n        }\n      }\n    "]))),variables:{first:e.limit,after:e.after,hopeAtGTE:e.timeRange[0]/1e3,hopeAtLTE:e.timeRange[1]/1e3,titleContains:e.selectInput,isFinished:e.isFinished,isClosed:e.isClosed}})}function $(){return f["a"].query({url:"query",method:"post",headers:{"Content-Type":"application/json"},fetchPolicy:"no-cache",query:Object(h["a"])(l||(l=Object(p["a"])(["\n      query {\n        users(where: { or: [{ isSecretary: true }, { isAdmin: true }] }) {\n          edges {\n            node {\n              id\n              uname\n              phone\n            }\n          }\n        }\n      }\n    "])))})}function v(){return f["a"].query({url:"query",method:"post",headers:{"Content-Type":"application/json"},fetchPolicy:"no-cache",query:Object(h["a"])(u||(u=Object(p["a"])(["\n      query {\n        orders(where: { hasReceiver: true }) {\n          edges {\n            node {\n              id\n            }\n          }\n        }\n      }\n    "])))})}function q(e,t){return f["a"].mutate({url:"query",method:"post",headers:{"Content-Type":"application/json"},mutation:Object(h["a"])(c||(c=Object(p["a"])(["\n      mutation ($uid: ID!, $oid: ID!) {\n        receive(input: { uid: $uid, oid: $oid })\n      }\n    "]))),variables:{uid:e,oid:t}})}function A(e){return f["a"].mutate({url:"query",method:"post",headers:{"Content-Type":"application/json"},mutation:Object(h["a"])(d||(d=Object(p["a"])(["\n      mutation ($id: ID!) {\n        updateOrder(input: { isClosed: true }, id: $id) {\n          isClosed\n        }\n      }\n    "]))),variables:{id:e}})}}}]);