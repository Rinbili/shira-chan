(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ced31b44"],{"37f9":function(t,e,a){"use strict";a.r(e);var n,i,r,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Barchart",{ref:"Barchar",staticStyle:{"margin-top":"20px"},attrs:{id:"Barchar",data:t.lastSevenDaysSingleDose}}),a("div",{staticStyle:{display:"flex",height:"25rem",width:"100%"}},[a("Piechart",{ref:"Piechar",staticStyle:{"margin-top":"20px"},attrs:{id:"Piechar",width:"50%",data:t.theNumberOfRepairOrdersForEachType}}),a("div",{staticStyle:{width:"50%",margin:"auto 0 auto 0"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{display:"flex"},attrs:{span:6}},[a("el-row",{staticStyle:{"text-align":"center"},attrs:{align:"middle"}},[a("i",{staticClass:"iconfont icon-wenjian",staticStyle:{"font-size":"100px"}}),a("div",{staticStyle:{"text-align":"center","font-size":"25px","font-weight":"bold"}},[t._v(" 总单数 "),a("div",[a("CountTo",{attrs:{"end-val":t.totalQuantity}})],1)])])],1),a("el-col",{staticStyle:{display:"flex"},attrs:{span:6}},[a("el-row",{staticStyle:{"text-align":"center"},attrs:{align:"middle"}},[a("i",{staticClass:"iconfont icon-weiwancheng",staticStyle:{"font-size":"100px"}}),a("div",{staticStyle:{"text-align":"center","font-size":"25px","font-weight":"bold"}},[t._v(" 未完成单数 "),a("div",[a("CountTo",{attrs:{"end-val":t.missedQuantity}})],1)])])],1),a("el-col",{staticStyle:{display:"flex"},attrs:{span:6}},[a("el-row",{staticStyle:{"text-align":"center"},attrs:{align:"middle"}},[a("i",{staticClass:"iconfont icon-yiwancheng",staticStyle:{"font-size":"100px"}}),a("div",{staticStyle:{"text-align":"center","font-size":"25px","font-weight":"bold"}},[t._v(" 已完成单数 "),a("div",[a("CountTo",{attrs:{"end-val":t.orderedQuantity}})],1)])])],1),a("el-col",{staticStyle:{display:"flex"},attrs:{span:6}},[a("el-row",{staticStyle:{"text-align":"center"},attrs:{align:"middle"}},[a("i",{staticClass:"iconfont icon-haoping",staticStyle:{"font-size":"100px","font-weight":"bold"}}),a("div",{staticStyle:{"text-align":"center","font-size":"25px","font-weight":"bold"}},[t._v(" 好评数 "),a("div",[a("CountTo",{attrs:{"end-val":t.praiseNumber}})],1)])])],1)],1)],1)],1)],1)},o=[],l=(a("4e82"),a("d3b7"),a("159b"),a("99af"),a("b64b"),a("07ac"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:{height:t.height,width:t.width},attrs:{id:t.id}})}),d=[],c=(a("e9c4"),a("313e")),u={props:{id:{type:String,default:"main"},data:{type:Object,default:function(){return{xAxis:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],yAxis:[120,200,150,80,70,110,130]}}},title:{type:String,default:"近七日单量"},width:{type:String,default:"100%"},height:{type:String,default:"25rem"}},watch:{data:{handler:function(t,e){var a=this;t&&"{}"!=JSON.stringify(t)&&this.$nextTick((function(){a.draw()}))},deep:!0},"$store.state.settings.hamburgerTooggle":function(t){setTimeout(c["a"](document.getElementById(this.id)).resize,300)}},mounted:function(){this.draw()},methods:{draw:function(){var t,e=document.getElementById(this.id),a=c["a"](e);t={title:{text:this.title,left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:this.data.xAxis},yAxis:{type:"value",data:this.data.yAxis,minInterval:1},series:[{data:this.data.yAxis,type:"bar",showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"}}]},t&&a.setOption(t,!0)}}},h=u,y=a("2877"),f=Object(y["a"])(h,l,d,!1,null,"36938d69",null),g=f.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:{height:t.height,width:t.width},attrs:{id:t.id}})},v=[],m={props:{id:{type:String,default:"main"},data:{type:Array,default:function(){return[{value:1048,name:"Search Engine"},{value:735,name:"Direct"},{value:580,name:"Email"},{value:484,name:"Union Ads"},{value:300,name:"Video Ads"}]}},title:{type:String,default:"各类别报修单数量"},width:{type:String,default:"100%"},height:{type:String,default:"25rem"}},watch:{data:{handler:function(t,e){var a=this;t&&"{}"!=JSON.stringify(t)&&this.$nextTick((function(){a.draw()}))},deep:!0},"$store.state.settings.hamburgerTooggle":function(t){setTimeout(c["a"](document.getElementById(this.id)).resize,300)}},mounted:function(){this.draw()},methods:{draw:function(){var t,e=document.getElementById(this.id),a=c["a"](e);t={title:{text:this.title,left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",radius:"50%",data:this.data,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},t&&a.setOption(t,!0)}}},b=m,w=Object(y["a"])(b,p,v,!1,null,"60070fe1",null),S=w.exports,x=a("ec1b"),T=a.n(x),E=a("8785"),O=a("5184"),C=a("2866");function A(t){return C["a"].query({url:"query",method:"post",headers:{"Content-Type":"application/json"},fetchPolicy:"no-cache",query:Object(O["a"])(n||(n=Object(E["a"])(["\n      query ($createdAtGTE: Int64, $createdAtLTE: Int64) {\n        orders(\n          where: { createdAtGTE: $createdAtGTE, createdAtLTE: $createdAtLTE }\n        ) {\n          edges {\n            node {\n              createdAt\n            }\n          }\n        }\n      }\n    "]))),variables:{createdAtGTE:parseInt(t[0]/1e3),createdAtLTE:parseInt(t[t.length-1]/1e3)}})}function D(){return C["a"].query({url:"query",method:"post",headers:{"Content-Type":"application/json"},fetchPolicy:"no-cache",query:Object(O["a"])(i||(i=Object(E["a"])(["\n      query {\n        orders {\n          edges {\n            node {\n              type\n            }\n          }\n          totalCount\n        }\n      }\n    "])))})}function j(t){return C["a"].query({url:"query",method:"post",headers:{"Content-Type":"application/json"},fetchPolicy:"no-cache",query:Object(O["a"])(r||(r=Object(E["a"])(["\n      query ($isFinished: Boolean, $isClosed: Boolean, $evaluationGTE: Float) {\n        orders(\n          where: {\n            or: [{ isFinished: $isFinished }, { isClosed: $isClosed }]\n            evaluationGTE: $evaluationGTE\n          }\n        ) {\n          edges {\n            node {\n              id\n            }\n          }\n          totalCount\n        }\n      }\n    "]))),variables:{isFinished:t.isFinished,isClosed:t.isClosed,evaluationGTE:t.evaluationGTE}})}var F={components:{CountTo:T.a,Piechart:S,Barchart:g},data:function(){return{totalQuantity:400,orderedQuantity:300,missedQuantity:100,praiseNumber:400,lastSevenDaysSingleDose:{xAxis:"",yAxis:""},theNumberOfRepairOrdersForEachType:[]}},created:function(){var t=this;this.getTheLastSevenDaysOfRepairReports(),this.getTheRepairNumbersForEachCategory(),j({isFinished:!0,isClosed:!0,evaluationGTE:null}).then((function(e){t.orderedQuantity=e.data.orders.edges.length,t.missedQuantity=t.totalQuantity-t.orderedQuantity})),j({isFinished:!0,isClosed:!0,evaluationGTE:4}).then((function(e){t.praiseNumber=e.data.orders.edges.length}))},methods:{getTheLastSevenDaysOfRepairReports:function(){for(var t=this,e=new Date,a=[],n=6;n>=0;n--){var i=new Date(e);i.setDate(e.getDate()-n);var r=i.getTime();a.push(r)}A(a).then((function(e){for(var a=[],n=0;n<e.data.orders.edges.length;n++)a[n]=e.data.orders.edges[n].node.createdAt;t.calculateTheLastSevenDaysOfSingleDose(a)}))},calculateTheLastSevenDaysOfSingleDose:function(t){t.sort((function(t,e){return t-e}));var e={};t.forEach((function(t){var a=1e3*t,n=new Date(a),i=n.getFullYear(),r=n.getMonth()+1,s=n.getDate(),o="".concat(i,"-").concat(r,"-").concat(s);e.hasOwnProperty(o)?e[o]++:e[o]=1})),this.lastSevenDaysSingleDose.xAxis=Object.keys(e),this.lastSevenDaysSingleDose.yAxis=Object.values(e)},getTheRepairNumbersForEachCategory:function(){var t=this;D().then((function(e){var a=[];t.totalQuantity=e.data.orders.edges.length;for(var n=0;n<e.data.orders.edges.length;n++)a[n]=e.data.orders.edges[n].node.type;t.CalculateTheNumberOfRepairClaimsForEachCategory(a)}))},CalculateTheNumberOfRepairClaimsForEachCategory:function(t){var e=this;t.sort((function(t,e){return t-e}));var a={"启动故障":0,"系统故障":0,"蓝屏故障":0,"黑屏故障":0,"死机故障":0,"重启故障":0,"电脑服务":0};t.forEach((function(t){switch(t){case"0":a["启动故障"]=a["启动故障"]+1;break;case"1":a["系统故障"]=a["系统故障"]+1;break;case"2":a["蓝屏故障"]=a["蓝屏故障"]+1;break;case"3":a["黑屏故障"]=a["黑屏故障"]+1;break;case"4":a["死机故障"]=a["死机故障"]+1;break;case"5":a["重启故障"]=a["重启故障"]+1;break;case"6":a["电脑服务"]=a["电脑服务"]+1;break}})),Object.keys(a).forEach((function(t){var n=a[t];e.theNumberOfRepairOrdersForEachType.push({name:t,value:n})}))}}},$=F,k=(a("7392"),Object(y["a"])($,s,o,!1,null,"5e819589",null));e["default"]=k.exports},7392:function(t,e,a){"use strict";a("76ce")},"76ce":function(t,e,a){}}]);