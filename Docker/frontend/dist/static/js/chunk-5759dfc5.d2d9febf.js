(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5759dfc5"],{d470:function(e,t,r){"use strict";r.r(t);var n,a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",staticStyle:{display:"flex"},attrs:{slot:"header"},slot:"header"},[r("span",{staticStyle:{"margin-left":"auto","margin-right":"auto"}},[r("h2",[e._v("报修单")])])]),r("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:"故障标题",prop:"title"}},[r("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"预约时间",prop:"appointment"}},[r("div",{staticClass:"block"},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"12:00:00","picker-options":e.expireTimeOption,"value-format":"timestamp"},model:{value:e.form.appointment,callback:function(t){e.$set(e.form,"appointment",t)},expression:"form.appointment"}})],1)]),r("el-form-item",{attrs:{label:"预约电话",prop:"phone"}},[r("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),r("el-form-item",{attrs:{label:"故障类型",prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择故障类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.faultList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"故障描述",prop:"description"}},[r("el-input",{attrs:{type:"textarea",rows:4,"show-word-limit":"",maxlength:"100"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),r("span",{staticStyle:{display:"flex",width:"100%"}},[r("el-button",{staticStyle:{"margin-left":"auto"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),r("el-button",{staticStyle:{"margin-right":"auto"},on:{click:e.onEmpty}},[e._v("清空")])],1)],1)],1)},o=[],i=(r("ac1f"),r("00b4"),r("99af"),r("b64b"),r("e9c4"),r("8785")),l=(r("a4d3"),r("e01a"),r("5184")),s=r("2866");function u(e){return s["a"].mutate({url:"query",method:"post",headers:{"Content-Type":"application/json"},mutation:Object(l["a"])(n||(n=Object(i["a"])(["\n      mutation (\n        $requesterID: ID\n        $title: String!\n        $content: String!\n        $contact: String!\n        $type: String!\n        $hopeAt: Int64\n      ) {\n        createOrder(\n          input: {\n            requesterID: $requesterID\n            title: $title\n            content: $content\n            contact: $contact\n            type: $type\n            hopeAt: $hopeAt\n          }\n        ) {\n          id\n        }\n      }\n    "]))),variables:{requesterID:e.id,title:e.title,content:e.description,contact:e.phone,type:e.type,hopeAt:parseInt(e.appointment/1e3)}})}var c={id:"",title:"",type:"",appointment:"",phone:"",description:""},p={data:function(){var e=function(e,t,r){var n=/^1[3456789]\d{9}$/;n.test(t)?r():r(new Error("请输入正确手机格式"))};return{form:{},faultList:[{value:0,label:"启动故障"},{value:1,label:"系统故障"},{value:2,label:"蓝屏故障"},{value:3,label:"黑屏故障"},{value:4,label:"死机故障"},{value:5,label:"重启故障"},{value:6,label:"电脑服务"}],rules:{title:[{required:!0,message:"请输入报修标题",trigger:"blur"}],appointment:[{required:!0,message:"请选择预约时间",trigger:"blur"}],phone:[{required:!0,message:"请输入电话号码",trigger:"change"},{required:!0,message:"电话号码格式错误",trigger:"blur",validator:e}],type:[{required:!0,message:"请选择故障类型",trigger:"blur"}],description:[{required:!0,message:"请输入报修描述",trigger:"blur"}]},expireTimeOption:{disabledDate:function(e){return e.getTime()<Date.now()-864e5},selectableRange:function(){var e=new Date,t=e.getHours(),r=e.getMinutes(),n=e.getSeconds();return["".concat(t,":").concat(r,":").concat(n," - 23:59:59")]}()}}},created:function(){this.form=JSON.parse(JSON.stringify(c)),this.form.phone=this.$store.state.user.phone},methods:{onSubmit:function(){var e=this;this.form.id=this.$store.state.user.id,this.$refs["form"].validate((function(t){t&&u(e.form).then((function(t){e.$message({message:"提交成功",type:"success"}),e.form=JSON.parse(JSON.stringify(c)),e.form.phone=e.$store.state.user.phone,e.form.appointment=new Date})).catch((function(t){e.$message.error("提交失败")}))}))},onEmpty:function(){this.form=JSON.parse(JSON.stringify(c))}}},m=p,f=r("2877"),d=Object(f["a"])(m,a,o,!1,null,null,null);t["default"]=d.exports},e9c4:function(e,t,r){var n=r("23e7"),a=r("d066"),o=r("d039"),i=a("JSON","stringify"),l=/[\uD800-\uDFFF]/g,s=/^[\uD800-\uDBFF]$/,u=/^[\uDC00-\uDFFF]$/,c=function(e,t,r){var n=r.charAt(t-1),a=r.charAt(t+1);return s.test(e)&&!u.test(a)||u.test(e)&&!s.test(n)?"\\u"+e.charCodeAt(0).toString(16):e},p=o((function(){return'"\\udf06\\ud834"'!==i("\udf06\ud834")||'"\\udead"'!==i("\udead")}));i&&n({target:"JSON",stat:!0,forced:p},{stringify:function(e,t,r){var n=i.apply(null,arguments);return"string"==typeof n?n.replace(l,c):n}})}}]);