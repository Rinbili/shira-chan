(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69445a9c"],{"1e15":function(e,t,n){e.exports=n.p+"static/img/头像.9fb8ac72.png"},"25f0":function(e,t,n){"use strict";var r=n("6eeb"),i=n("825a"),a=n("d039"),o=n("ad6d"),s="toString",l=RegExp.prototype,c=l[s],u=a((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=s;(u||d)&&r(RegExp.prototype,s,(function(){var e=i(this),t=String(e.source),n=e.flags,r=String(void 0===n&&e instanceof RegExp&&!("flags"in l)?o.call(e):n);return"/"+t+"/"+r}),{unsafe:!0})},"333d":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"block",staticStyle:{"margin-top":"10px",position:"absolute",bottom:"0",right:"0"}},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.SizeChange,"current-change":e.CurrentChange}})],1)},i=[],a=(n("a9e3"),{props:{page:{type:Number,default:1},size:{type:Number,default:10},total:{type:Number,default:10}},data:function(){return{currentPage:1,pageSize:10}},watch:{Page:function(){this.currentPage=this.page},Size:function(){this.pageSize=this.size}},mounted:function(){this.currentPage=this.page,this.pageSize=this.size},methods:{SizeChange:function(e){this.pageSize=e,this.currentPage=1,this.$emit("handlePageSizeChange",this.currentPage,this.pageSize)},CurrentChange:function(e){this.currentPage=e,this.$emit("handlePageCurrentChange",this.currentPage,this.pageSize)}}}),o=a,s=n("2877"),l=Object(s["a"])(o,r,i,!1,null,"582eac06",null);t["a"]=l.exports},"4df4":function(e,t,n){"use strict";var r=n("0366"),i=n("7b0b"),a=n("9bdd"),o=n("e95a"),s=n("50c4"),l=n("8418"),c=n("35a1");e.exports=function(e){var t,n,u,d,p,f,h=i(e),g="function"==typeof this?this:Array,m=arguments.length,y=m>1?arguments[1]:void 0,b=void 0!==y,v=c(h),C=0;if(b&&(y=r(y,m>2?arguments[2]:void 0,2)),void 0==v||g==Array&&o(v))for(t=s(h.length),n=new g(t);t>C;C++)f=b?y(h[C],C):h[C],l(n,C,f);else for(d=v.call(h),p=d.next,n=new g;!(u=p.call(d)).done;C++)f=b?a(d,y,[u.value,C],!0):u.value,l(n,C,f);return n.length=C,n}},"95c0":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("div",[r("span",[e._v("选择时间范围：")]),r("el-date-picker",{staticStyle:{"margin-right":"20px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp",size:"small"},model:{value:e.query.timeRange,callback:function(t){e.$set(e.query,"timeRange",t)},expression:"query.timeRange"}}),r("span",[e._v("工单标题：")]),r("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"请输入工单标题",size:"small"},model:{value:e.query.selectInput,callback:function(t){e.$set(e.query,"selectInput",t)},expression:"query.selectInput"}}),r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.search}},[e._v("查询")]),r("el-button",{attrs:{icon:"el-icon-refresh-right",size:"small"},on:{click:e.reset}},[e._v("重置")]),r("el-button",{attrs:{type:"success",icon:"el-icon-refresh",size:"small"},on:{click:e.refresh}},[e._v("刷新")])],1),r("div",{staticStyle:{"margin-top":"10px"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check",size:"small"}},[e._v("批量派单")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-circle-close",size:"small"}},[e._v("批量拒单")])],1)]),r("div",{staticClass:"center-table",staticStyle:{height:"550px",position:"relative"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{"v-loading":e.tableLoading,data:e.formList,border:"","header-cell-style":{background:"#f3f6fd"},"max-height":"500","element-loading-background":"rgba(255, 255, 255, 0.5)","element-loading-text":"数据正在加载中","element-loading-spinner":"el-icon-loading"}},[r("el-table-column",{attrs:{align:"left",type:"selection"}}),r("el-table-column",{attrs:{align:"center",prop:"createdAt",label:"提交时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(new Date(1e3*t.row.createdAt).toLocaleString())+" ")]}}])}),r("el-table-column",{attrs:{align:"center",prop:"title",label:"标题"}}),r("el-table-column",{attrs:{align:"center",prop:"type",label:"故障类型"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.type?r("span",[e._v("启动故障")]):e._e(),"1"===t.row.type?r("span",[e._v("系统故障")]):e._e(),"2"===t.row.type?r("span",[e._v("蓝屏故障")]):e._e(),"3"===t.row.type?r("span",[e._v("黑屏故障")]):e._e(),"4"===t.row.type?r("span",[e._v("死机故障")]):e._e(),"5"===t.row.type?r("span",[e._v("重启故障")]):e._e(),"6"===t.row.type?r("span",[e._v("电脑服务")]):e._e()]}}])}),r("el-table-column",{attrs:{align:"center",prop:"hopeAt",label:"预约时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(new Date(1e3*t.row.hopeAt).toLocaleString())+" ")]}}])}),r("el-table-column",{attrs:{align:"center",prop:"contact",label:"联系电话"}}),r("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"success",icon:"el-icon-view",size:"small"},on:{click:function(n){return e.formDetail(t.row.id)}}},[e._v("详情")]),r("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.receiverFormList.includes(t.row.id),expression:"!receiverFormList.includes(slot.row.id)"}],attrs:{type:"primary",icon:"el-icon-circle-check",size:"small"},on:{click:function(n){return e.openDispatchDialog(t.row.id)}}},[e._v("派单")]),r("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.receiverFormList.includes(t.row.id),expression:"!receiverFormList.includes(slot.row.id)"}],staticStyle:{"margin-top":"10px"},attrs:{type:"danger",icon:"el-icon-circle-close",size:"small"},on:{click:function(n){return e.reject(t.row.id)}}},[e._v("拒单")])]}}])})],1),r("Pagination",{attrs:{total:Number(e.total),page:e.query.page,size:e.query.limit},on:{handlePageSizeChange:e.getCursor,handlePageCurrentChange:e.getCursor}})],1),r("el-dialog",{attrs:{title:"报修单详情",visible:e.formDilog},on:{"update:visible":function(t){e.formDilog=t}}},[r("el-form",{ref:"form",attrs:{model:{form:e.form},"label-width":"80px"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"预约时间"}},[r("el-input",{attrs:{readonly:!0},model:{value:new Date(1e3*e.form.hopeAt).toLocaleString(),callback:function(t){e.$set(new Date(1e3*e.form.hopeAt),"toLocaleString()",t)},expression:"new Date(form.hopeAt * 1000).toLocaleString()"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"工单标题"}},[r("el-input",{attrs:{readonly:!0},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"故障类型"}},[r("el-input",{attrs:{readonly:!0},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"联系电话"}},[r("el-input",{attrs:{readonly:!0},model:{value:e.form.contact,callback:function(t){e.$set(e.form,"contact",t)},expression:"form.contact"}})],1)],1)],1),r("el-row",[r("el-form-item",{attrs:{label:"故障描述"}},[r("el-input",{attrs:{type:"textarea",rows:5,readonly:!0},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1)],1)],1),r("el-dialog",{attrs:{title:"选择派单人员",visible:e.dispatchDialog,width:"60%"},on:{"update:visible":function(t){e.dispatchDialog=t}}},[r("span",[r("div",{staticStyle:{width:"100%",display:"grid","grid-template-columns":"repeat(3, 32%)","grid-gap":"10px 2%"}},e._l(e.receiverList,(function(t,i){return r("div",{key:i,staticClass:"selectPeople",staticStyle:{cursor:"pointer"},on:{click:function(n){return e.selectPeople(t.id,i)}}},[r("img",{staticStyle:{width:"100px",height:"100px",margin:"auto 10px auto 10px"},attrs:{src:n("1e15")}}),r("div",{staticStyle:{"margin-top":"10px"}},[r("div",[e._v("用户名:"+e._s(t.uname))]),r("div",{staticStyle:{"margin-top":"10px"}},[e._v(" 联系电话： "),r("div",[e._v(e._s(t.phone))])])])])})),0)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dispatchDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.sendOrder}},[e._v("确 定")])],1)])],1)],1)},i=[];n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("fb6a"),n("25f0"),n("b0c0"),n("a630"),n("ac1f"),n("00b4");function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function s(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n["return"]||n["return"]()}finally{if(l)throw a}}}}n("d81d");var l=n("333d"),c=n("c7ea"),u={components:{Pagination:l["a"]},data:function(){return{query:{page:1,limit:10,after:null,timeRange:"",selectInput:"",isFinished:!1,isClosed:!1},formList:[],receiverFormList:[],total:"",formDilog:!1,form:"",oid:"",dispatchDialog:!1,receiverList:"",uid:"",tableLoading:!1}},created:function(){var e=this;this.getList(),Object(c["e"])().then((function(t){for(var n=0;n<t.data.orders.edges.length;n++)e.receiverFormList.push(t.data.orders.edges[n].node.id)})),Object(c["d"])().then((function(t){e.receiverList=t.data.users.edges.map((function(e){return{id:e.node.id,uname:e.node.uname,phone:e.node.phone}}))}))},methods:{getList:function(){var e=this;this.tableLoading=!0,Object(c["f"])(this.query).then((function(t){e.formList=t.data.orders.edges.map((function(e){return{id:e.node.id,createdAt:e.node.createdAt,hopeAt:e.node.hopeAt,title:e.node.title,type:e.node.type,contact:e.node.contact}})),e.total=t.data.orders.totalCount,e.tableLoading=!1})),this.tableLoading=!1},getReceiverOrderList:function(){var e=this;Object(c["e"])().then((function(t){for(var n=0;n<t.data.orders.edges.length;n++)e.receiverFormList.push(t.data.orders.edges[n].node.id)}))},getCursor:function(e,t){var n=this;this.query.page=e,this.query.limit=t,1!==this.query.page?(this.query.after=null,Object(c["g"])(this.query).then((function(e){console.log(111,e.data),n.query.after=e.data.orders.pageInfo.endCursor,n.getList()}))):(this.query.after=null,this.getList())},search:function(){this.getReceiverOrderList(),this.getList()},reset:function(){this.query.timeRange="",this.query.selectInput=null,this.getReceiverOrderList(),this.getList()},refresh:function(){this.getReceiverOrderList(),this.getList()},formDetail:function(e){var t=this;Object(c["c"])(e).then((function(e){switch(t.form=e.data.orders.edges[0].node,t.form.type){case"0":t.form.type="启动故障";break;case"1":t.form.type="系统故障";break;case"2":t.form.type="蓝屏故障";break;case"3":t.form.type="黑屏故障";break;case"4":t.form.type="死机故障";break;case"5":t.form.type="重启故障";break;case"6":t.form.type="其他故障";break}})),this.formDilog=!0},selectPeople:function(e,t){if(this.uid=e,""==document.getElementsByClassName("selectPeople")[t].style.backgroundColor){var n,r=s(document.getElementsByClassName("selectPeople"));try{for(r.s();!(n=r.n()).done;){var i=n.value;i.style.backgroundColor=""}}catch(a){r.e(a)}finally{r.f()}document.getElementsByClassName("selectPeople")[t].style.backgroundColor="rgb(32,160,255,0.5)"}else document.getElementsByClassName("selectPeople")[t].style.backgroundColor=""},openDispatchDialog:function(e){this.dispatchDialog=!0,this.oid=e},sendOrder:function(){var e=this;Object(c["i"])(this.uid,this.oid).then((function(t){!0===t.data.receive?(e.$message.success("操作成功"),e.getReceiverOrderList(),e.getList(),e.dispatchDialog=!1):(e.$message.error("操作失败"),e.getReceiverOrderList(),e.getList(),e.dispatchDialog=!1)})).catch((function(t){e.$message.error("操作失败"),e.getReceiverOrderList(),e.getList()}))},reject:function(e){var t=this;Object(c["h"])(e).then((function(e){!0===e.data.updateOrder.isClosed?(t.$message.success("操作成功"),t.getReceiverOrderList(),t.getList()):(t.$message.error("操作失败"),t.getReceiverOrderList(),t.getList())})).catch((function(e){t.$message.error("操作失败"),t.getReceiverOrderList(),t.getList()}))}}},d=u,p=(n("a737"),n("2877")),f=Object(p["a"])(d,r,i,!1,null,"1269a0ba",null);t["default"]=f.exports},a630:function(e,t,n){var r=n("23e7"),i=n("4df4"),a=n("1c7e"),o=!a((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:o},{from:i})},a737:function(e,t,n){"use strict";n("d879")},c7ea:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"g",(function(){return m})),n.d(t,"f",(function(){return y})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"d",(function(){return C})),n.d(t,"e",(function(){return $})),n.d(t,"i",(function(){return L})),n.d(t,"h",(function(){return w}));var r,i,a,o,s,l,c,u,d,p=n("8785"),f=n("5184"),h=n("2866");function g(e){return h["a"].query({url:"query",method:"post",headers:{"Content-Type":"application/json"},fetchPolicy:"no-cache",query:Object(f["a"])(r||(r=Object(p["a"])(["\n      query (\n        $first: Int\n        $after: Cursor\n        $isFinished: Boolean\n        $isClosed: Boolean\n        $hopeAtGTE: Int64\n        $hopeAtLTE: Int64\n        $titleContains: String\n      ) {\n        orders(\n          first: $first\n          after: $after\n          where: {\n            or: [{ isFinished: $isFinished }, { isClosed: $isClosed }]\n            hopeAtGTE: $hopeAtGTE\n            hopeAtLTE: $hopeAtLTE\n            titleContains: $titleContains\n          }\n        ) {\n          edges {\n            cursor\n          }\n          pageInfo {\n            startCursor\n            endCursor\n          }\n        }\n      }\n    "]))),variables:{first:e.limit*(e.page-1),after:e.after,hopeAtGTE:parseInt(e.timeRange[0]/1e3),hopeAtLTE:parseInt(e.timeRange[1]/1e3),titleContains:e.selectInput,isFinished:e.isFinished,isClosed:e.isClosed}})}function m(e){return h["a"].query({url:"query",method:"post",headers:{"Content-Type":"application/json"},fetchPolicy:"no-cache",query:Object(f["a"])(i||(i=Object(p["a"])(["\n      query (\n        $first: Int\n        $after: Cursor\n        $isFinished: Boolean\n        $isClosed: Boolean\n        $hopeAtGTE: Int64\n        $hopeAtLTE: Int64\n        $titleContains: String\n      ) {\n        orders(\n          first: $first\n          after: $after\n          where: {\n            isClosed: $isClosed\n            isFinished: $isFinished\n            hopeAtGTE: $hopeAtGTE\n            hopeAtLTE: $hopeAtLTE\n            titleContains: $titleContains\n          }\n        ) {\n          edges {\n            cursor\n          }\n          pageInfo {\n            startCursor\n            endCursor\n          }\n        }\n      }\n    "]))),variables:{first:e.limit*(e.page-1),after:e.after,hopeAtGTE:parseInt(e.timeRange[0]/1e3),hopeAtLTE:parseInt(e.timeRange[1]/1e3),titleContains:e.selectInput,isFinished:e.isFinished,isClosed:e.isClosed}})}function y(e){return h["a"].query({url:"query",method:"post",headers:{"Content-Type":"application/json"},fetchPolicy:"no-cache",query:Object(f["a"])(a||(a=Object(p["a"])(["\n      query (\n        $first: Int\n        $after: Cursor\n        $isFinished: Boolean\n        $isClosed: Boolean\n        $hopeAtGTE: Int64\n        $hopeAtLTE: Int64\n        $titleContains: String\n      ) {\n        orders(\n          first: $first\n          after: $after\n          where: {\n            isClosed: $isClosed\n            isFinished: $isFinished\n            hopeAtGTE: $hopeAtGTE\n            hopeAtLTE: $hopeAtLTE\n            titleContains: $titleContains\n          }\n        ) {\n          edges {\n            node {\n              id\n              title\n              contact\n              type\n              hopeAt\n              createdAt\n            }\n          }\n          totalCount\n        }\n      }\n    "]))),variables:{first:e.limit,after:e.after,hopeAtGTE:parseInt(e.timeRange[0]/1e3),hopeAtLTE:parseInt(e.timeRange[1]/1e3),titleContains:e.selectInput,isFinished:e.isFinished,isClosed:e.isClosed}})}function b(e){return h["a"].query({url:"query",method:"post",headers:{"Content-Type":"application/json"},query:Object(f["a"])(o||(o=Object(p["a"])(["\n      query ($id: ID) {\n        orders(where: { id: $id }) {\n          edges {\n            node {\n              id\n              title\n              content\n              contact\n              type\n              hopeAt\n              createdAt\n            }\n          }\n          totalCount\n        }\n      }\n    "]))),variables:{id:e}})}function v(e){return h["a"].query({url:"query",method:"post",headers:{"Content-Type":"application/json"},fetchPolicy:"no-cache",query:Object(f["a"])(s||(s=Object(p["a"])(["\n      query (\n        $first: Int\n        $after: Cursor\n        $isFinished: Boolean\n        $isClosed: Boolean\n        $hopeAtGTE: Int64\n        $hopeAtLTE: Int64\n        $titleContains: String\n      ) {\n        orders(\n          first: $first\n          after: $after\n          where: {\n            or: [{ isFinished: $isFinished }, { isClosed: $isClosed }]\n            hopeAtGTE: $hopeAtGTE\n            hopeAtLTE: $hopeAtLTE\n            titleContains: $titleContains\n          }\n        ) {\n          edges {\n            node {\n              id\n              title\n              contact\n              type\n              hopeAt\n              createdAt\n              evaluation\n            }\n          }\n          totalCount\n        }\n      }\n    "]))),variables:{first:e.limit,after:e.after,hopeAtGTE:e.timeRange[0]/1e3,hopeAtLTE:e.timeRange[1]/1e3,titleContains:e.selectInput,isFinished:e.isFinished,isClosed:e.isClosed}})}function C(){return h["a"].query({url:"query",method:"post",headers:{"Content-Type":"application/json"},fetchPolicy:"no-cache",query:Object(f["a"])(l||(l=Object(p["a"])(["\n      query {\n        users(where: { or: [{ isSecretary: true }, { isAdmin: true }] }) {\n          edges {\n            node {\n              id\n              uname\n              phone\n            }\n          }\n        }\n      }\n    "])))})}function $(){return h["a"].query({url:"query",method:"post",headers:{"Content-Type":"application/json"},fetchPolicy:"no-cache",query:Object(f["a"])(c||(c=Object(p["a"])(["\n      query {\n        orders(where: { hasReceiver: true }) {\n          edges {\n            node {\n              id\n            }\n          }\n        }\n      }\n    "])))})}function L(e,t){return h["a"].mutate({url:"query",method:"post",headers:{"Content-Type":"application/json"},mutation:Object(f["a"])(u||(u=Object(p["a"])(["\n      mutation ($uid: ID!, $oid: ID!) {\n        receive(input: { uid: $uid, oid: $oid })\n      }\n    "]))),variables:{uid:e,oid:t}})}function w(e){return h["a"].mutate({url:"query",method:"post",headers:{"Content-Type":"application/json"},mutation:Object(f["a"])(d||(d=Object(p["a"])(["\n      mutation ($id: ID!) {\n        updateOrder(input: { isClosed: true }, id: $id) {\n          isClosed\n        }\n      }\n    "]))),variables:{id:e}})}},d879:function(e,t,n){}}]);